```python
import os
from epanettools import epanet2 as et
from epanettools.examples import simple
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
from scipy.stats import norm
from tqdm import tqdm

file = os.path.join(os.path.dirname(simple.__file__),'Austin_Pattern.inp')

ret=et.ENopen(file,"Austin_Pattern.rpt","")

# Network Properties
ret,nlinks=et.ENgetcount(et.EN_LINKCOUNT)
ret,nnodes=et.ENgetcount(et.EN_NODECOUNT)

nodes=[]
links=[]

for index in range(1,nnodes+1):
    ret,t=et.ENgetnodeid(index)
    nodes.append(t)

for index in range(1,nlinks+1):
    ret,t=et.ENgetlinkid(index)
    links.append(t)    
    
pumps=[91,92,93,94,95,96,97]
npumps=len(pumps)

import itertools
status=list(itertools.product(([0, 1]), repeat=npumps))

for x in status:
    if sum(x)>5:
        status.remove(x)
status.remove((1,1,1,1,1,1,0))
#이건 왜 안지워지는지 모르겠음
status.remove((1,1,1,0,0,1,1))
status.remove((1,1,0,1,0,1,1))
status.remove((1,1,0,0,1,1,1))
status.remove((0,0,1,1,1,1,1))

ncase=len(status)

pres_init=[]
for i in range(0,ncase):
    t=[]
    pres_init.append(t)
    for j in range(nnodes):
        y=[]
        pres_init[i].append(y)

time=[]
for i in range(ncase):
    t=[]
    time.append(t)
    
et.ENsettimeparam(et.EN_DURATION, 0)

for j in range(ncase):
    for k in range(npumps):
        et.ENsetlinkvalue(pumps[k], et.EN_INITSTATUS, status[j][k])
    
    et.ENopenH()
    et.ENinitH(0)

    while True:
        ret,t=et.ENrunH()
            
        for i in range(nnodes):
            ret,p=et.ENgetnodevalue(i+1, et.EN_PRESSURE)
            pres_init[j][i].append(p)

        ret,tstep=et.ENnextH()
        if (tstep<=0):
            break

    ret=et.ENcloseH()

init_40_evaluation=[]
for i in range(ncase):
    t=[]
    init_40_evaluation.append(t)

for i in range(ncase):
    for j in range(nnodes):
        if pres_init[i][j][0]>40:
            init_40_evaluation[i].append(1)

optimal_init_status=[]

for i in range(ncase):
    if sum(init_40_evaluation[i])==125:
        optimal_init_status.append(i+1)
        
print(optimal_init_status)
print(pres_init[3])
```

    [4, 6, 7, 8, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116]
    [[26.556781768798828], [53.640533447265625], [54.49591064453125], [49.262908935546875], [50.16012954711914], [68.77677917480469], [51.5516357421875], [64.68975067138672], [60.29362487792969], [73.41313171386719], [67.20659637451172], [65.4199447631836], [55.10284423828125], [57.64166259765625], [56.93231964111328], [54.19285202026367], [55.03825759887695], [64.4949951171875], [71.69564819335938], [59.28721618652344], [63.4825439453125], [59.078243255615234], [60.9373893737793], [61.39065933227539], [61.3202018737793], [60.75941848754883], [61.52128982543945], [61.390647888183594], [65.53040313720703], [57.06568908691406], [63.5191535949707], [76.18388366699219], [78.58344268798828], [67.56278991699219], [67.65779876708984], [69.14244842529297], [66.8538818359375], [66.40571594238281], [71.99201202392578], [54.69287872314453], [58.685569763183594], [56.80778884887695], [58.924835205078125], [57.47675704956055], [58.76218032836914], [63.242530822753906], [70.56378936767578], [70.5782699584961], [71.5050048828125], [56.69926452636719], [65.0520248413086], [63.00568771362305], [65.40802001953125], [72.05561065673828], [70.80805206298828], [62.01877212524414], [71.97442626953125], [72.77250671386719], [73.97593688964844], [74.03347778320312], [63.92882537841797], [65.36707305908203], [61.21339416503906], [69.84759521484375], [70.99288177490234], [69.4739990234375], [70.8197021484375], [54.19285202026367], [61.52128982543945], [59.28721618652344], [63.4825439453125], [59.078243255615234], [61.39065933227539], [61.3202018737793], [61.390647888183594], [65.53040313720703], [58.76218032836914], [63.92882537841797], [70.5782699584961], [56.69926452636719], [65.40802001953125], [72.05561065673828], [63.00568771362305], [65.0520248413086], [72.06829071044922], [71.72822570800781], [72.29806518554688], [72.43484497070312], [72.37386322021484], [72.37386322021484], [72.37386322021484], [72.43484497070312], [72.43484497070312], [72.37386322021484], [72.23118591308594], [72.08394622802734], [72.09781646728516], [72.09781646728516], [72.09781646728516], [72.01409912109375], [72.0248794555664], [72.03861999511719], [71.97442626953125], [71.99201202392578], [71.89579010009766], [72.08394622802734], [71.85088348388672], [72.3914566040039], [72.29439544677734], [72.22315979003906], [72.15270233154297], [72.05348205566406], [71.9732894897461], [71.90853118896484], [71.90751647949219], [72.14854431152344], [72.28621673583984], [72.69451141357422], [72.69451141357422], [72.70573425292969], [72.6611099243164], [72.40619659423828], [72.35003662109375], [72.6611099243164], [72.69451141357422], [72.69173431396484], [0.0]]
    
